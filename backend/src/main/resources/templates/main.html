<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
	<title>Greeting</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="generator" content="genius, rrest">
	<meta name="description" content="사랑하는 아내와 딸">
	<meta name="keywords" content="genius">
	<link rel="shortcut icon" href="/favicon.ico"/>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
	<link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet">
	<link rel="stylesheet" th:href="@{/css/main.css}" href="/css/main.css"/>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
</head>
<body id="page-top">
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
	<a class="navbar-brand js-scroll-trigger" href="#page-top">
		<span class="d-block d-lg-none" sec:authentication="name">Clarence Taylor</span>
		<span class="d-none d-lg-block">
			<img class="img-fluid img-profile rounded-circle mx-auto mb-2" th:src="${user.imageUrl + '?height=200'}" alt="">
		</span>
	</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse" id="navbarSupportedContent">
		<ul class="navbar-nav">
			<li class="nav-item" th:each="item:${navigationItems}">
				<a class="nav-link js-scroll-trigger" th:href="${item.link}" href="#about" th:text="${item.name}">About</a>
			</li>
		</ul>
	</div>
</nav>
<div id="container" style="height: 3000px; position: absolute"></div>
<div class="container-fluid p-0" style="position:absolute;">

	<section class="resume-section p-3 p-lg-5 d-flex d-column" id="about">
		<div class="my-auto">
			<h1 class="mb-0" th:inline="text">[[${user.username}]]</h1>
			<h2 class="mb-0" th:inline="text">Sign in to <span class="text-primary" th:text="${user.providerType}">Taylor</span>
			</h2>
			<div class="subheading mb-5">
				<p th:text="${user.email}"></p>
			</div>
		</div>
	</section>

	<hr class="m-0">

	<section class="resume-section p-3 p-lg-5 d-flex flex-column" id="schedule">
		<div class="my-auto">
			<h2 class="mb-5">Schedule</h2>
			<div th:each="alimy:${alimies}" class="resume-item d-flex flex-column flex-md-row mb-5">
				<div class="resume-content mr-auto">
					<h3 class="mb-0" th:text="${alimy.subject}">No subject</h3>
					<div class="subheading mb-3" th:text="${alimy.description}">No description</div>
					<p th:text="${alimy.message}">No message</p>
				</div>
				<div class="resume-date text-md-right">
					<span class="text-primary" th:text="${alimy.regDateTime}"></span>
					<form th:action="@{/}" method="post">
						<input hidden name="_method" value="delete"/>
						<input hidden name="alimyId" th:value="${alimy.id}"/>
						<button class="btn btn-sm btn-danger" th:value="${alimy.id}" type="submit">삭제</button>
					</form>
				</div>
			</div>
		</div>

	</section>

	<hr class="m-0">

	<section class="resume-section p-3 p-lg-5 d-flex flex-column" id="register">
		<div class="my-auto">
			<h2 class="mb-5">Register</h2>
			<div class="resume-item d-flex flex-column">
				<form class="form-horizontal" th:action="@{/}" th:object="${requestForSaveForm}" action="#" method="post">
					<div class="form-group">
						<label class="mb-0" for="subject">제목</label>
						<input class="form-control" type="text" id="subject" th:field="*{subject}" placeholder="제목을 입력하세요">
						<span class="text-danger" th:if="${#fields.hasErrors('subject')}" th:errors="*{subject}"></span>
					</div>
					<div class="form-group">
						<label class="mb-0" for="message">내용</label>
						<textarea class="form-control" id="message" th:field="*{message}" rows="3" placeholder="내용을 입력하세요"></textarea>
						<span class="text-danger" th:if="${#fields.hasErrors('subject')}" th:errors="*{message}"></span>
					</div>
					<div class="form-group">
						<label class="mb-0" for="year">년 (예시 : 2019-2025 2019,2020,2021 2019-2020 2022-2025)</label>
						<input class="form-control" id="year" th:field="*{unitType.year}" placeholder="년도를 입력하세요">
						<span class="text-danger" th:if="${#fields.hasErrors('unitType.year')}" th:errors="*{unitType.year}"></span>
					</div>
					<div class="form-group">
						<label class="mb-0" for="month">월 (예시 : 1,2,3 1~3 1-2,3-5)</label>
						<input class="form-control" id="month" th:field="*{unitType.month}" placeholder="월을 입력하세요">
						<span class="text-danger" th:if="${#fields.hasErrors('unitType.month')}" th:errors="*{unitType.month}"></span>
					</div>
					<div class="form-group">
						<label class="mb-0" for="dayOfMonth">일 (예시 : 1,2,3 1~3 1-2,3-5 1~31)</label>
						<input class="form-control" id="dayOfMonth" th:field="*{unitType.dayOfMonth}" placeholder="일을 입력하세요">
						<span class="text-danger" th:if="${#fields.hasErrors('unitType.dayOfMonth')}" th:errors="*{unitType.dayOfMonth}"></span>
					</div>
					<div class="form-group">
						<label class="mb-0" for="dayOfWeek">요일 (예시 : 1,2,3 1~3 1-2,3-5 1~31)</label>
						<input class="form-control" id="dayOfWeek" th:field="*{unitType.dayOfWeek}" value="?" placeholder="일을 입력하세요">
						<span class="text-danger" th:if="${#fields.hasErrors('unitType.dayOfWeek')}" th:errors="*{unitType.dayOfWeek}"></span>
					</div>
					<div class="form-group">
						<label class="mb-0" for="hours">시간 (예시 : 0,1,2 0~3 0-2,3-5 0-24)</label>
						<input class="form-control" id="hours" th:field="*{unitType.hours}" placeholder="시간을 입력하세요">
						<span class="text-danger" th:if="${#fields.hasErrors('unitType.hours')}" th:errors="*{unitType.hours}"></span>
					</div>
					<div class="form-group">
						<label class="mb-0" for="hours">분 (예시 : 0,1,2 0~3 0-2,3-5 0-24)</label>
						<input class="form-control" id="minutes" th:field="*{unitType.minutes}" placeholder="분을 입력하세요">
						<span class="text-danger" th:if="${#fields.hasErrors('unitType.minutes')}" th:errors="*{unitType.minutes}"></span>
					</div>
					<span class="text-danger" th:if="${#fields.hasErrors('unitType.cronExpression')}" th:errors="*{unitType.cronExpression}"></span>
					<input id="status" type="hidden" name="status" value="START">
					<button type="submit" class="btn btn-primary">저장</button>
				</form>
			</div>
		</div>
	</section>

</div>
<script th:href="@{/js/main.js}" src="/js/main.js"></script>
<script src="/three/build/three.js"></script>
<script src="/three/js/WebGL.js"></script>
<script src="/three/js/libs/stats.min.js"></script>
<script src="/three/js/loaders/GLTFLoader.js"></script>
<script>
	let container, camera, scene, raycaster, renderer, parentTransform, sphereInter;
	let mouse = new THREE.Vector2();
	let radius = 100, theta = 0;

	init();
	animate();

	function init() {
		container = document.getElementById('container');
		camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 10000);
		scene = new THREE.Scene();
		scene.background = new THREE.Color(0xffffff);
		let geometry = new THREE.SphereBufferGeometry(5);
		var material = new THREE.MeshBasicMaterial({color: 0xff0000});
		sphereInter = new THREE.Mesh(geometry, material);
		sphereInter.visible = false;
		scene.add(sphereInter);
		let lineGeometry = new THREE.BufferGeometry();
		let points = [];
		var point = new THREE.Vector3();
		var direction = new THREE.Vector3();
		for (let i = 0; i < 500; i++) {
			direction.x += Math.random() - 0.5;
			direction.y += Math.random() - 0.5;
			direction.z += Math.random() - 0.5;
			direction.normalize().multiplyScalar(50);
			point.add(direction);
			points.push(point.x, point.y, point.z);
		}
		lineGeometry.addAttribute('position', new THREE.Float32BufferAttribute(points, 3));
		parentTransform = new THREE.Object3D();
		parentTransform.position.x = Math.random() * 40 - 20;
		parentTransform.position.y = Math.random() * 40 - 20;
		parentTransform.position.z = Math.random() * 40 - 20;
		parentTransform.rotation.x = Math.random() * 2 * Math.PI;
		parentTransform.rotation.y = Math.random() * 2 * Math.PI;
		parentTransform.rotation.z = Math.random() * 2 * Math.PI;
		parentTransform.scale.x = Math.random() + 0.5;
		parentTransform.scale.y = Math.random() + 0.5;
		parentTransform.scale.z = Math.random() + 0.5;
		for (let i = 0; i < 500; i++) {
			let object;
			if (Math.random() > 0.5) {
				object = new THREE.Line(lineGeometry);
			} else {
				object = new THREE.LineSegments(lineGeometry);
			}
			object.position.x = Math.random() * 400 - 200;
			object.position.y = Math.random() * 400 - 200;
			object.position.z = Math.random() * 400 - 200;
			object.rotation.x = Math.random() * 2 * Math.PI;
			object.rotation.y = Math.random() * 2 * Math.PI;
			object.rotation.z = Math.random() * 2 * Math.PI;
			object.scale.x = Math.random() + 0.5;
			object.scale.y = Math.random() + 0.5;
			object.scale.z = Math.random() + 0.5;
			parentTransform.add(object);
		}
		scene.add(parentTransform);
		raycaster = new THREE.Raycaster();
		raycaster.linePrecision = 3;
		renderer = new THREE.WebGLRenderer({antialias: true});
		renderer.setPixelRatio(window.devicePixelRatio);
		renderer.setSize(window.innerWidth, window.innerHeight);
		container.appendChild(renderer.domElement);
		window.addEventListener('resize', onWindowResize, false);
	}

	function onWindowResize() {
		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();
		renderer.setSize(window.innerWidth, window.innerHeight);
	}

	function animate() {
		requestAnimationFrame(animate);
		render();
	}

	function render() {
		theta += 0.1;
		camera.position.x = radius * Math.sin(THREE.Math.degToRad(theta));
		camera.position.y = radius * Math.sin(THREE.Math.degToRad(theta));
		camera.position.z = radius * Math.cos(THREE.Math.degToRad(theta));
		camera.lookAt(scene.position);
		camera.updateMatrixWorld();
		raycaster.setFromCamera(mouse, camera);
		renderer.render(scene, camera);
	}
</script>
</body>
</html>